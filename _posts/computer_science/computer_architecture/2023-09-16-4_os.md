---
date: 2023-09-16
title: "[컴퓨터 구조] 4. 하드웨어를 관리하는 운영 체제"
categories:
  - computer_science
  - computer_architecture
---


## 운영 체제


![4.os.png](/assets/images/computer_architecture/4.os.png)


프로그램이 하드웨어를 조작하기 위해서 반드시 운영 체제를 거쳐야 합니다. 운영 체제는 문제 있는 프로그램이 하드웨어를 잘못 조작하는 것을 방지하고 프로그램에게 복잡하고 다양한 하드웨어를 다루기 위한 간단하고 통일된 방법을 제공합니다. 이 두가지를 위해 운영체제는 프로세스, 가상 메모리, 파일이라는 추상화를 사용합니다.

### 1. **프로세스(Processes)**

프로세스는 프로세서, 메인 메모리, 입/출력 장치에 대한 추상화입니다. 간단하게, 프로세스는 **"실행중인 프로그램"** 을 의미합니다. 이 추상화는 동시에 실행되는 프로세스들이 각각 하드웨어를 독점적으로 사용하고 있는 것처럼 보이게합니다.

단일 프로세서에 대해서 생각해보겠습니다. 단일 프로세서는 하나의 프로그램만 실행할 수 있지만 context switching 기법을 통해 동시에 여러 프로세스를 실행하는 것처럼 보이게 할 수 있습니다. 조금 더 자세하게, 운영체제가 A 프로세스에서 B 프로세스로 넘어갈때, context switching으로 운영체제는 A 프로세스의 내용을 저장하고 B 프로세스가 중단되었던 시점의 내용을 복원하여 B 프로세스로 제어권을 전달합니다. 

*<context switching의 context가 뭘까?>
context란 PC(프로그램 카운터), 레지스터 파일, 메인 메모리의 내용으로 이루어진 프로세스의 특정 시점을 표현하는 정보입니다.*


**Kernel**은 메모리 상에 존재하는 운영체제 코드의 일부인데, 이 코드가 프로세스 간의 전환을 관리합니다. 한 프로그램이 운영 체제에 뭔가를 요구할 때, **function call**이라는 명령을 사용해서 제어권을 커널로 전달합니다. 그러면 커널은 요구사항을 수행하고 다시 프로그램으로 제어권을 넘깁니다.

프로세스는 **스레드**라 불리는 여러개의 실행 단위로 이루어져 있습니다. 

### 2. **가상 메모리(Virtual Memory)**

가상 메모리는 메인 메모리와 입/출력 장치에 대한 추상화입니다. 가상 메모리는 각각의 프로세스가 메인 메모리를 독점적으로 사용하는것처럼 보이게 합니다. 

각 프로세스는 **가상 주소 공간(Virtual Address Space)** 라 불리는 논리적인 공간을 가집니다. 가상 주소 공간은 아래와 같이 나뉩니다.
- Program code and data: 실행할 코드  
- Heap: 사용자가 동적 할당
- Shared libraries: C 표준 라이브러리나 수학 라이브러리 같은 것들
- Stack: 컴파일러가 함수 호출 시 사용, 함수 종료 시 반환
- Kernel virtual memory: 커널이 사용하는 메모리 주소


### 3. **파일(files)**

파일은 디스크, 키보드, 디스플레이 등 모든 입/출력 장치를 모델링한 바이트 배열입니다. 파일을 통해서 시스템에 속한 다양한 입/출력 장치의 통일된 사용법을 어플리케이션에게 제공합니다.

